<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chunkator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .container {
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
      font-size: 16px;
    }
    .title {
      font-size: 40px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
    }
    .subtitle {
      font-size: 20px;
      margin-bottom: 10px;
    }
    textarea {
      width: 100%;
      height: 150px;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      background-color: #f9f9f9;
      border: 2px solid #ccc;
      color: #000000;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #A9A9A9;
      transform: translateY(-4px);
    }
    .hide {
      display: none;
    }
    .english-text-box {
      border: 2px solid #ccc;
      padding: 10px;
      font-size: 20px;
      text-align: justify;
      background-color: #f9f9f9;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    #generateButtonChunk {
      border: 2px solid #ccc;
    }
    #exerciseOutput {
      font-size: 20px;
      line-height: 2;
      text-align: justify;
      word-spacing: 0.5em;
      margin-top: 20px;
    }
   .draggable-word {
  display: inline-flex; /* Use flexbox for centering */
  align-items: center; /* Vertically center the content */
  justify-content: center; /* Horizontally center the content */
  cursor: pointer;
  margin-right: 5px;
  margin-bottom: 5px;
  border: 1px solid black;
  padding: 2px 10px;
  border-radius: 5px;
  background-color: #f0f0f0;
  height: 20px; /* Set a fixed height */
    overflow: hidden; /* Hide overflow text */
}
    .correct-chunk {
      background-color: #d4edda;
      border-color: #c3e6cb;
    }
    .wrong-chunk {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    .dropzone-container {
      margin-top: 20px;
      margin-bottom: 20px;
    }
    .dropzone {
      border: 2px dashed #ccc;
      min-height: 20px;
      font-size: 20px;
      height: auto;
      border-radius: 10px;
      display: inline-block;
      padding: 5px 10px;
      vertical-align: top;
    }
    select {
      width: 20%;
      padding: 5px;
      border-radius: 10px;
      margin-bottom: 10px;
      height: 35px;
      }
    }
  </style>
</head>
<body onload="initializeChunk()">
  <div class="container">
    <div class="title">Chunkator</div>
    <div class="subtitle" id="subtitle">Unjumble the chunks: Use the dropdown menu to select the size of the chunks you want to create and click on Generate exercise.</div>
    <br>
    <div class="english-text-box">
      <div id="englishText">My favourite subject is history because it is very interesting, and I learn a lot about the past. Computer science is also a useful subject that I will need in the future, especially if I want to work in a technical field. I like learning science, but sometimes I find it difficult, especially when we cover complex topics. German is an important subject that I enjoy studying because it helps me learn a new language. Some students find math stressful, but I find it easy and logical. Geography, on the other hand, is not my favourite subject because I find it exhausting to remember so many details. Nevertheless, I look forward to art because it's relaxing and I can be creative. My friend likes economics, but I find it boring. At our school, social studies and economics are compulsory subjects, but I would rather have more optional subjects like music.</div>
    </div>
    <div id="frenchText" class="hide">Mein Lieblingsfach ist Geschichte, weil es sehr interessant ist und ich viel über die Vergangenheit lerne. Informatik ist auch ein nützliches Fach, das ich in der Zukunft brauchen werde, besonders wenn ich in einem technischen Bereich arbeiten möchte. Ich lerne gern Naturwissenschaften, aber manchmal finde ich es schwierig, besonders wenn wir komplexe Themen behandeln. Deutsch ist ein wichtiges Fach, das ich gerne studiere, weil es mir hilft, eine neue Sprache zu lernen. Manche Schüler finden Mathematik stressig, aber ich finde es einfach und logisch. Erdkunde hingegen ist nicht mein Lieblingsfach, weil ich es anstrengend finde, so viele Details zu behalten. Trotzdem freue ich mich auf Kunst, weil es entspannend ist und ich dabei kreativ sein kann. Mein Freund mag Wirtschaft, aber ich finde es langweilig. An unserer Schule sind Gesellschaft und Wirtschaft Pflichtfächer, aber ich würde lieber mehr Wahlfächer wie Musik haben.</div>
    <div class="input-container">
      <label for="chunkSize">Select Chunk Size:</label>
      <select id="chunkSize">
        <option value="1">Single Words</option>
        <option value="2">Small chunks</option>
        <option value="4">Medium chunks</option>
        <option value="6">Big chunks</option>
      </select>
      <button id="generateButtonChunk" onclick="generateChunk()">Generate Exercise</button>
      <br>
    </div>
    <div id="exerciseOutput" class="hide"></div>
    <div class="dropzone-container hide" id="dropZones"></div>
    <div id="feedback" class="hide"></div>
    <div class="ruled-lines print-only">
      <div class="ruled-line"></div>
      <div class="ruled-line"></div>
      <div class="ruled-line"></div>
      <div class="ruled-line"></div>
      <div class="ruled-line"></div>
    </div>
  </div>
  <script>
    var originalChunks = [];
    var currentChunkIndex = 0;

    function initializeChunk() {
      document.getElementById('englishText').classList.remove('hide');
    }

    function generateChunk() {
      var textInput = document.getElementById('frenchText').textContent;
      var exerciseOutput = document.getElementById('exerciseOutput');
      exerciseOutput.innerHTML = '';
      var dropZones = document.getElementById('dropZones');
      dropZones.innerHTML = '';
      var subtitle = document.getElementById('subtitle');
      subtitle.classList.add('hide');
      var chunkSize = parseInt(document.getElementById('chunkSize').value);
      originalChunks = getWordChunks(textInput, chunkSize);
      var shuffledChunks = shuffleArray([...originalChunks]);

      for (var i = 0; i < originalChunks.length; i++) {
        var dropZone = document.createElement('div');
        dropZone.classList.add('dropzone');
        dropZones.appendChild(dropZone);
      }

      for (var i = 0; i < shuffledChunks.length; i++) {
        var chunk = shuffledChunks[i].join(' ');
        var chunkElement = document.createElement('div');
        chunkElement.textContent = chunk;
        chunkElement.classList.add('draggable-word');
        chunkElement.setAttribute('onclick', 'selectChunk(this)');
        exerciseOutput.appendChild(chunkElement);
      }

      var ruledLines = document.querySelector('.ruled-lines');
      ruledLines.innerHTML = '';

      var numLines = 20;
      for (var i = 0; i < numLines; i++) {
        var ruledLine = document.createElement('div');
        ruledLine.classList.add('ruled-line');
        ruledLines.appendChild(ruledLine);
      }

      exerciseOutput.classList.remove('hide');
      dropZones.classList.remove('hide');
      document.getElementById('feedback').classList.add('hide');
      currentChunkIndex = 0;
    }

    function getWordChunks(text, chunkSize) {
      var words = text.split(/\s+/).filter(Boolean);
      var chunks = [];
      for (var i = 0; i < words.length; i += chunkSize) {
        chunks.push(words.slice(i, i + chunkSize));
      }
      return chunks;
    }

    function shuffleArray(array) {
      for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
      return array;
    }

    function selectChunk(element) {
      var chunkText = element.textContent;
      var chunkWords = chunkText.split(/\s+/).filter(Boolean);
      var correctChunk = originalChunks[currentChunkIndex].join(' ');

      if (chunkWords.join(' ') === correctChunk) {
        var dropZones = document.getElementById('dropZones');
        var dropZone = dropZones.children[currentChunkIndex];
        dropZone.textContent = chunkText;
        dropZone.classList.add('correct-chunk');
        element.remove();
        currentChunkIndex++;

        if (currentChunkIndex === originalChunks.length) {
          document.getElementById('feedback').textContent = 'All chunks are in the correct order!';
          document.getElementById('feedback').classList.remove('hide');
        }
      } else {
        element.classList.add('wrong-chunk');
        setTimeout(() => {
          element.classList.remove('wrong-chunk');
        }, 2000);
      }
    }
  </script>
</body>
</html>
